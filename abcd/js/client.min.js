"use strict";!function(){function t(t){return BXC_TRANSLATIONS&&t in BXC_TRANSLATIONS?BXC_TRANSLATIONS[t]:t}function e(t,e=-1){return T.loading(t,e)}function n(t,e={},n=!1){return T.ajax(t,e,n)}function i(t,e=!0){return T.activate(t,e)}function r(t){return t.closest(".bxc-main")}function a(t){for(var e=t.split("?").pop().split("&"),n={},i=0;i<e.length;i++){var r=e[i].split("=");n[r[0]]=r[1]}return n}function o(t,e=-1,n={}){if(-1===e){let e=localStorage.getItem(t);return e?JSON.parse(e):n}localStorage.setItem(t,JSON.stringify(e))}function c(){s.on("click",".bxc-clipboard",function(){let e=C(this).find("span"),n=e.html();navigator.clipboard.writeText(window.atob(C(this).attr("data-text"))),e.html(t("Copied")),i(this),setTimeout(()=>{i(this,!1),e.html(n)},2e3)})}var s,l,d,u,p,f=!1,h="",m={},x={},b="undefined",g=typeof BXC_ADMIN!==b||document.getElementsByClassName("bxc-admin").length,v=document.getElementsByTagName("script"),y=typeof BXC_LANGUAGE!==b&&BXC_LANGUAGE,C=function(t){return"object"==typeof t&&"e"in t?t:new C.init("string"==typeof t?document.querySelectorAll(t):t)};C.init=function(t){this.e="SELECT"==t.tagName||void 0===t[0]&&!NodeList.prototype.isPrototypeOf(t)?[t]:t},C.ajax=function(t,e=!1,n=!1,i="POST"){let r=new XMLHttpRequest,a="";if(r.open(i,t,!0),e)if("bxc_wp_ajax"==e.action){for(var o in e)"object"==typeof e[o]&&(e[o]=JSON.stringify(e[o]));a=new URLSearchParams(e).toString(),r.setRequestHeader("Content-type","application/x-www-form-urlencoded")}else(a=new FormData).append("data",JSON.stringify(e));r.onload=(()=>{n&&n(r.responseText)}),r.onerror=(()=>!1),r.send(a)},C.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},C.documentHeight=function(){let t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},C.init.prototype.on=function(t,e,n){for(var i=0;i<this.e.length;i++)this.e[i].addEventListener(t,function(t){for(var i=t.target;i&&i!==this;)i.matches(e)&&n.call(i,t),i=i.parentNode})},C.init.prototype.addClass=function(t){for(var e=0;e<this.e.length;e++)this.e[e].classList.add(t);return C(this.e)},C.init.prototype.removeClass=function(t){t=t.trim().split(" ");for(var e=0;e<t.length;e++)for(var n=0;n<this.e.length;n++)this.e[n].classList.remove(t[e]);return C(this.e)},C.init.prototype.toggleClass=function(t){for(var e=0;e<this.e.length;e++)this.e[e].classList.toggle(t);return C(this.e)},C.init.prototype.setClass=function(t,e=!0){for(var n=0;n<this.e.length;n++)e?C(this.e[n]).addClass(t):C(this.e[n]).removeClass(t);return C(this.e)},C.init.prototype.hasClass=function(t){return!!this.e.length&&this.e[0].classList.contains(t)},C.init.prototype.find=function(t){return 0===t.indexOf(">")&&(t=":scope"+t),!!this.e.length&&C(this.e[0].querySelectorAll(t))},C.init.prototype.parent=function(){return C(this.e[0].parentElement)},C.init.prototype.prev=function(){return C(this.e[0].previousElementSibling)},C.init.prototype.next=function(){return C(this.e[0].nextElementSibling)},C.init.prototype.attr=function(t,e=!1){return!1===e?this.e[0].getAttribute(t):(e?this.e[0].setAttribute(t,e):this.e[0].removeAttribute(t),C(this.e))},C.init.prototype.html=function(t=!1){if(this.e.length)return!1===t?this.e[0].innerHTML:("string"==typeof t?this.e[0].innerHTML=t:this.e[0].appendChild(t),C(this.e))},C.init.prototype.append=function(t){var e=document.createElement("template");return e.innerHTML=t.trim(),this.e[0].appendChild(e.content.firstChild),C(this.e)},C.init.prototype.prepend=function(t){return this.e[0].innerHTML=t+this.e[0].innerHTML,C(this.e)},C.init.prototype.replace=function(t){return this.e[0].outerHTML=t,C(this.e)},C.init.prototype.remove=function(){for(var t=0;t<this.e.length;t++)this.e[t].remove()},C.init.prototype.data=function(){let t={};for(var e=0,n=this.e[0].attributes,i=n.length;e<i;e++)t[n[e].nodeName.substr(5)]=n[e].nodeValue;return t},C.init.prototype.is=function(t){return!(1!=this.e[0].nodeType||!this.e.length)&&(t=t.toLowerCase(),this.e[0].tagName.toLowerCase()==t||C(this).attr("type")==t)},C.init.prototype.index=function(){return[].indexOf.call(this.e[0].parentElement.children,this.e[0])},C.init.prototype.siblings=function(){return this.e[0].parentNode.querySelectorAll(":scope > *")},C.init.prototype.length=function(){return this.e.length},C.init.prototype.val=function(t=null){if(null!==t)for(var e=0;e<this.e.length;e++)this.e[e].value=t;return this.e.length?this.e[0].value:""},C.load=function(t=!1,e=!0,n=!1,i=!1){let r=document.createElement(e?"script":"link");t?(e?r.src=t:r.href=t,r.type=e?"text/javascript":"text/css"):r.innerHTML=i,n&&(r.onload=function(){n()}),e||(r.rel="stylesheet"),document.head.appendChild(r)},window._query=C;var T={loading:function(t,e=-1){return t=C(t),-1!==e?t.setClass("bxc-loading",!0===e):!!t.hasClass("bxc-loading")||(this.loading(t,!0),!1)},activate:function(t,e=!0){return C(t).setClass("bxc-active",e)},ajax:function(t,e=!1,n=!1){e.function=t,e.language=y,C.ajax(BXC_URL+"ajax.php",e,t=>{let e=!1,i=!1;try{e=!((i=JSON.parse(t))&&"success"in i&&i.success)}catch(t){e=!0}e?(s.find(".bxc-loading").removeClass("bxc-loading"),console.error(t),x[p]=!1):n&&n(i.response)})},cookie:function(t,e=!1,n=!1,i="get",r=!1){let a="https:"==location.protocol?"SameSite=None;Secure;":"";if("get"==i){let e=document.cookie.split(";");for(var o=0;o<e.length;o++){for(var c=e[o];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(t)){let e=c.substring(t.length+1,c.length);return e||!1}}return!1}if("set"==i){let i=new Date;i.setTime(i.getTime()+n*(r?1:86400)*1e3),document.cookie=t+"="+e+";expires="+i.toUTCString()+";path=/;"+a}else this.cookie(t)&&(document.cookie=t+"="+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;"+a)},beautifyTime:function(e,n=!1,i=!1){let r;if("0000-00-00 00:00:00"==e)return"";if(e.indexOf("-")>0){let t=e.split(/[- :]/);r=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}else{let t=e.split(/[. :]/);r=new Date(t[2],t[1]-1,t[0],t[3],t[4],t[5])}let a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())),o=Math.round((new Date-a)/864e5)*(i?-1:1),c=[t("Sunday"),t("Monday"),t("Tuesday"),t("Wednesday"),t("Thursday"),t("Friday"),t("Saturday")],s=a.toLocaleTimeString("en-EN",{hour:"2-digit",minute:"2-digit"});return"0"===s.charAt(0)&&(s.includes("PM")||s.includes("AM"))&&(s=s.substring(1)),o<1?`<span>${t("Today")}</span>${n?` <span>${s}</span>`:""}`:o<8?`<span>${c[a.getDay()]}</span>${n?` <span>${s}</span>`:""}`:`<span>${a.toLocaleDateString()}</span>${n?` <span>${s}</span>`:""}`},search:function(t,e){let n=C(t).parent().find("i"),i=C(t).val().toLowerCase().trim();n.hasClass("bxc-loading")||(i!=h?(clearTimeout(f),f=setTimeout(()=>{h=i,e(i,n),this.loading(n)},200)):this.loading(n,!1))},searchClear:function(t,e){C(t).next().val()&&(C(t).next().val(""),e())},getURL:function(t=!1,e=!1){if(e||(e=location.search),!t){for(var n=e.split("?").pop().split("&"),i={},r=0;r<n.length;r++){var a=n[r].split("=");i[a[0]]=SBF.escape(a[1])}return i}return e.indexOf("?")>0&&(e=e.substr(0,e.indexOf("?"))),T.escape(decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[,""])[1].replace(/\+/g,"%20")||""))},escape:function(t){return t?t.replaceAll("<script","&lt;script").replaceAll("</script","&lt;/script").replaceAll("javascript:","").replaceAll("onclick=","").replaceAll("onerror=",""):t},checkout:{settings:function(t){let e=(t=C(t)).attr("data-boxcoin"),n={checkout_id:e};return e.includes("custom")?C.extend(n,C(t).data()):n},init:function(t,e,n=!1){let i=this.storageTransaction(t.checkout_id);C.ajax(BXC_URL+"init.php",{checkout:t,language:y},t=>{if((e=C(e)).html(t),i){if(p=e.attr("data-boxcoin"),u=e.find("> .bxc-main"),!["stripe","verifone"].includes(i.external_reference))if(i.encrypted)T.checkout.monitorTransaction(i.encrypted);else{let t=parseInt((Date.now()-i.storage_time)/1e3),e=BXC_SETTINGS.countdown-Math.floor(t/60),n=60-t%60;n&&e--,this.initTransaction(i.id,i.amount,i.address_payment,i.cryptocurrency,i.external_reference,[e,n],i.custom_token,i.redirect)}u.hasClass("bxc-popup")&&T.checkout.openPopup(p)}T.getURL("card")&&this.completeTransaction(T.getURL("card"),i),T.getURL("pay")&&e.find(`.bxc-payment-methods [data-cryptocurrency="${T.getURL("pay")}"]`).e[0].click(),n&&n(t)})},initTransaction:function(i,r,a,o,c,s=!1,l=!1,f=!1){let h=u.find(".bxc-pay-cnt"),b=h.find(".bxc-pay-address"),g=T.baseCode(o.toUpperCase()),v=h.find("[data-countdown]"),y={id:i,amount:r,address_payment:a,cryptocurrency:o,external_reference:c,custom_token:l,redirect:f},C=T.network(o,!1);u.addClass("bxc-pay-cnt-active"),b.find(".bxc-text").html(g+C+" "+t("address")),b.find(".bxc-title").html(a),b.find(".bxc-clipboard").attr("data-text",window.btoa(a)),(b=h.find(".bxc-pay-amount")).find(".bxc-title").html(r+" "+g),b.find(".bxc-clipboard").attr("data-text",window.btoa(r)),u.attr("data-transaction-id",i),b=h.find(".bxc-qrcode-text"),h.find(".bxc-qrcode").attr("src",`https://api.qrserver.com/v1/create-qr-code/?size=500x500&data=${a}&color=${BXC_SETTINGS.qr_code_color}`),b.find("img").attr("src",l?l.img:`${BXC_URL}media/icon-${o}.svg`),b.find("div").html(t("Only send {T} to this address").replace("{T}",g+C)),v.html(""),d=s?[s[0],s[1],!0]:[BXC_SETTINGS.countdown,0,!0],clearInterval(m[p]),m[p]=setInterval(()=>{v.html(`${d[0]}:${d[1]<10?"0":""}${d[1]}`),d[1]--,d[1]<=0&&(d[0]<=0&&setTimeout(()=>{T.event("TransactionCancelled",y),this.cancelTransaction(),u.find("#bxc-expired-tx-id").html(i),u.removeClass("bxc-tx-cnt-active").addClass("bxc-failed-cnt-active")},500),d[0]<5&&d[2]&&(v.parent().addClass("bxc-countdown-expiring"),d[2]=!1),d[0]--,d[1]=59)},1e3),clearInterval(m["check-"+p]),m["check-"+p]=setInterval(()=>{x[p]||(x[p]=!0,n("check-transactions",{transaction_id:i},t=>{if(x[p]=!1,t){if("expired"==t)return;if(Array.isArray(t)&&"error"==t[0])return console.error(t[1]);this.monitorTransaction(t)}}))},5e3),this.storageTransaction(p,y),T.event("TransactionStarted",y),e(h,!1)},monitorTransaction:function(e){let i=this.storageTransaction(p),r="check-"+p;clearInterval(m[p]),clearInterval(m[r]),m[r]=setInterval(()=>{u&&!x[p]&&(x[p]=!0,n("check-transaction",{transaction:e},n=>{x[p]=!1,u.find(".bxc-tx-confirmations").html(n.confirmations+" / "+BXC_SETTINGS.confirmations),n.confirmations&&u.find(".bxc-tx-status").addClass("bxc-tx-status-confirmed").html(t("Confirmed")),n.confirmed&&(n.underpayment?(u.removeClass("bxc-tx-cnt-active").addClass("bxc-underpayment-cnt-active"),clearInterval(m[r]),u.find("#bxc-underpaid-tx-id").html(i.id),this.cancelTransaction()):(n.invoice&&window.open(n.invoice),this.completeTransaction(e,i,r)))}))},3e3),i&&(i.encrypted=e),p&&this.storageTransaction(p,i),u&&(u.addClass("bxc-tx-cnt-active"),u.find(".bxc-tx-status").removeClass("bxc-tx-status-confirmed").html(t("Pending")),u.find(".bxc-tx-confirmations").html("0 / "+BXC_SETTINGS.confirmations))},completeTransaction:function(t,e,i=!1){typeof BXC_WP_AJAX_URL!=b&&C.ajax(BXC_WP_AJAX_URL,{action:"bxc_wp_ajax",type:"woocommerce-payment-complete",transaction:e},t=>{document.location.href=t}),BXC_SETTINGS.webhook&&n("webhook",{transaction:t}),e.redirect?setTimeout(()=>{document.location.href=encodeURI(`${e.redirect}${e.redirect.includes("?")?"&":"?"}transaction_id=${e.id}&amount=${e.amount}&address=${e.address}&cryptocurrency=${e.cryptocurrency}&external_reference=${e.external_reference}`)},1e3):u.removeClass("bxc-tx-cnt-active").addClass("bxc-complete-cnt-active"),clearInterval(m[i]),T.event("TransactionCompleted",e),this.cancelTransaction()},cancelTransaction:function(){clearInterval(m[p]),clearInterval(m["check-"+p]),u.removeClass("bxc-pay-cnt-active"),x[p]=!1,this.storageTransaction(p,"delete"),p=!1,u=!1},storageTransaction:function(t,e){let n=o("bxc-active-transaction"),i=t in n;if(e)"delete"==e?delete n[t]:i&&!e.encrypted||(e.storage_time=Date.now(),n[t]=e);else if(i){if(n[t].encrypted||n[t].storage_time+6e4*BXC_SETTINGS.countdown>Date.now())return n[t];delete n[t]}return o("bxc-active-transaction",n),!1},show:function(t){s.find(`[data-boxcoin="${t}"] > div`).removeClass("bxc-hidden")},openPopup(t,e=!0){i(s.find(`[data-boxcoin="${t}"] `).find(".bxc-popup,.bxc-popup-overlay"),e)}},event:function(t,e={}){e.checkout_id=p;let n=new CustomEvent("BXC"+t,e);document.dispatchEvent(n)},baseCode:function(t){return t.replace("_tron","").replace("_TRON","")},network:function(e,n=!0){let i={ETH:["usdt","usdc","link","shib","bat"],TRX:["usdt_tron"],BSC:["bnb","busd"]};e=e.toLowerCase();for(var r in i)if(i[r].includes(e)){let e=r+" "+t("network");return n?`<span class="bxc-label">${e}</span>`:" "+t("on")+" "+e}return""}};window.BOXCoin=T,document.addEventListener("DOMContentLoaded",()=>{if(s=C(document.body),g)c();else{if(typeof BXC_URL!=b)return;for(var d=0;d<v.length;d++)if(["boxcoin","boxcoin-js"].includes(v[d].id)){let f=v[d].src.replace("js/client.js","").replace("js/client.min.js",""),h=a(f);f.includes("?")&&(f=f.substr(0,f.indexOf("?"))),C.load(f+"css/client.css",!1),"lang"in h&&(y=h.lang),f.includes("?")&&(f=f.substr(0,f.indexOf("?"))),l=g?[]:s.find("[data-boxcoin]"),C.ajax(f+"init.php",{init:!0,language:y},t=>{C.load(!1,!0,!1,t),l.e.forEach(t=>{T.checkout.init(T.checkout.settings(t),t)})}),c(),T.event("Init"),s.on("click",".bxc-payment-methods > div",function(){let i=C(r(this)),a=i.parent().attr("data-boxcoin");if(i.find(".bxc-error").remove(),p&&a!=p)return i.find(".bxc-body").prepend(`<div class="bxc-error bxc-text">${t("Another transaction is being processed. Complete the transaction or cancel it to start a new one.")}</div>`),void setTimeout(()=>{i.find(".bxc-error").remove()},1e4);u=i,p=a;let c=C(this).attr("data-cryptocurrency"),s=u.attr("data-external-reference"),l=u.attr("data-price"),d=u.find("#user-amount"),f=C(this).attr("data-custom-coin"),h=!1;l&&-1!=l||(l=d.find("input").val())?(f&&(f={type:f,img:C(this).find("img").attr("src")}),u.find('#bxc-billing [name="name"]').val().trim()&&(h={},u.find("#bxc-billing input, #bxc-billing select").e.forEach(t=>{h[C(t).attr("name")]=C(t).val()}),o("bxc-billing",h)),u.addClass("bxc-pay-cnt-active"),e(u.find(".bxc-pay-cnt")),n("create-transaction",{amount:l,cryptocurrency_code:c,currency_code:u.attr("data-currency"),external_reference:u.attr("data-external-reference"),title:u.attr("data-title"),description:u.attr("data-description"),custom_token:f,url:document.location.href,billing:h?JSON.stringify(h):""},t=>{if(!Array.isArray(t))return console.error(t);if(["stripe","verifone"].includes(c)){let e={id:t[0],amount:l,external_reference:c};T.checkout.storageTransaction(p,e),T.event("TransactionStarted",e),document.location=t[2]}else T.checkout.initTransaction(t[0],t[1],t[2],c,s,!1,f,u.attr("data-redirect"))})):d.addClass("bxc-error")}),s.on("click",".bxc-back",function(){u.find(".bxc-pay-top-main").addClass("bxc-hidden")}),s.on("click","#bxc-abort-cancel, #bxc-confirm-cancel",function(){u.find(".bxc-pay-top-main").removeClass("bxc-hidden")}),s.on("click","#bxc-confirm-cancel",function(){T.event("TransactionCancelled",T.checkout.storageTransaction(p)),T.checkout.cancelTransaction()}),s.on("click",".bxc-failed-cnt .bxc-btn",function(){u.removeClass("bxc-failed-cnt-active")}),s.on("click",".bxc-btn-popup,.bxc-popup-close",function(){i(C(this.closest("[data-boxcoin]")).find(".bxc-popup,.bxc-popup-overlay"),C(this).hasClass("bxc-btn-popup"))}),s.on("click",".bxc-collapse-btn",function(){C(this).parent().removeClass("bxc-collapse"),C(this).remove()}),s.on("click","#bxc-btn-invoice",function(){let t=o("bxc-billing");if(t)for(var e in t)C(`#bxc-billing [name="${e}"]`).val(t[e]);C(this).remove(),C("#bxc-billing").removeClass("bxc-hidden")});break}}},!1)}();